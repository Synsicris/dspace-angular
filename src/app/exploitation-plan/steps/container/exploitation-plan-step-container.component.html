<div class="h-100 d-flex flex-column p-3 horizontal-step">
  <div id="{{(exploitationPlanStep$ | async).id}}" class="d-flex p-2 h-100 flex-wrap task-list-horizontal" cdkDropList
    cdkDropListOrientation="horizontal" [cdkDropListData]="(exploitationPlanStep$ | async)"
    [cdkDropListConnectedTo]="connectedToList" (cdkDropListEntered)="listEnteredToTask($event)"
    (cdkDropListExited)="listExited($event)">
    <ipw-exploitation-plan-task *ngFor="let task of (getTasks() | async); let i = index" cdkDrag
      class="mb-sm-1 mb-lg-4 mb-5 mr-sm-1 mr-lg-4 task-horizontal draggable-task"
      [projectCommunityId]="projectCommunityId" [exploitationPlanId]="(exploitationPlanStep$ | async).parentId"
      [exploitationPlanStepId]="(exploitationPlanStep$ | async).id"
      [exploitationPlanStepType]="(exploitationPlanStep$ | async).type" [exploitationPlanTask]="task" [data]="task"
      [cdkDragData]="task" [taskPosition]="i" [compareMode]="compareMode" (cdkDragStarted)="dragStarted($event)"
      (cdkDragDropped)="drop($event)" (cdkDragEntered)="dragEnteredToStep($event)" (cdkDragExited)="dragExited($event)">

      <div *cdkDragPlaceholder
        class="task-placeholder task-horizontal draggable-task d-flex justify-content-center align-items-center mr-sm-1 mr-lg-4"
        [ngClass]="{
                'task-preview-allowed': (isDragging | async) && (isDropAllowed | async),
                'task-preview-denied': (isDragging | async) && !(isDropAllowed | async)
              }">
        <i *ngIf="(isDragging | async) && (isDropAllowed | async)" class="fas fa-check fa-5x"></i>
        <i *ngIf="(isDragging | async) && !(isDropAllowed | async)" class="fas fa-exclamation fa-5x"></i>
      </div>
    </ipw-exploitation-plan-task>
  </div>
  <div class="d-flex justify-content-end">
    <button class="btn btn-link pr-0 open-modal" [disabled]="compareMode || isVersionOfAnItem"
      title="{{'impact-pathway.add.btn' | translate}}" (click)="openModal(); $event.stopPropagation()">
      <i class="fas fa-plus-circle fa-2x"></i>
    </button>
  </div>
</div>