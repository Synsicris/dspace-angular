<ipw-collapsable-panel #ipwCollapse class="d-block mb-3"
                       [sidebarPanelTitle]="getStepTitle()"
                       [startOpen]="!(isCollapsed() | async)"
                       [collapsable]="true">
  <ng-container ngProjectAs="panelIconTitle">
    <i ipwExploitationPlanIcon [exploitationPlanType]="exploitationPlanStep?.type"></i>
  </ng-container>
  <ng-container ngProjectAs="panelContent">
    <div class="p-2">
    <ds-alert [type]="'alert-info'" [content]="'exploitation-plan.' + exploitationPlanStep?.type + '.info.text'" [collapsible]="true"></ds-alert>
    <div class="p-0 m-0 mb-2 bg-light rounded">
      <ipw-exploitation-plan-step-container [exploitationPlanStep]="exploitationPlanStep"
                                            [projectCommunityId]="projectCommunityId"
                                            [fundingCommunity]="fundingCommunity"></ipw-exploitation-plan-step-container>
    </div>
    <ds-view-simple-item-form *ngIf="hasCheckbox && exploitationPlanStep"
                              [editMode]="getEditMode()"
                              [editTitle]="'exploitation-plan.edit.btn.title' | translate"
                              [fieldTitle]="'exploitation-plan.description.title' | translate"
                              [formConfig]="formConfig$"
                              [formSectionName]="getSectionName()"
                              [itemId]="exploitationPlanStep.id"
                              (itemUpdate)="updateExploitationPlanStep($event)"></ds-view-simple-item-form>
    <ipw-editable-textarea *ngIf="!hasCheckbox && exploitationPlanStep"
                           [editMode]="getEditMode()"
                           [formConfig]="formConfig$"
                           [formSectionName]="getSectionName()"
                           [itemId]="exploitationPlanStep.id"
                           [editTitle]="'exploitation-plan.edit.btn.title' | translate"
                           [fieldTitle]="'exploitation-plan.description.title' | translate"
                           [content]="exploitationPlanStep.description"
                           (contentChange)="updateExploitationPlanStep($event)"></ipw-editable-textarea>
    </div>
  </ng-container>
</ipw-collapsable-panel>
