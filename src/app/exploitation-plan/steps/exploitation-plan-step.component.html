<ipw-collapsable-panel class="d-block mb-3"
                       [sidebarPanelTitle]="getStepTitle()"
                       [startOpen]="false"
                       [collapsable]="true">
  <ng-container ngProjectAs="panelIconTitle">
    <i ipwExploitationPlanIcon [exploitationPlanType]="exploitationPlanStep?.type"></i>
  </ng-container>
  <ng-container ngProjectAs="panelIconStatus">
    <button class="btn btn-lg btn-link flex-shrink-1 align-self-center text-primary" [title]="'exploitation-plan.edit.btn.title' | translate">
      <span (click)="openEditModal(); $event.stopImmediatePropagation()"><i class="fas fa-edit"></i></span>
    </button>
  </ng-container>
  <ng-container ngProjectAs="panelContent">
    <div class="p-2">
    <ds-alert [type]="'alert-info'" [content]="'exploitation-plan.' + exploitationPlanStep?.type + '.info.text'" [collapsible]="true"></ds-alert>
    <div class="p-0 m-0 mb-2 bg-step-green rounded">
      <ipw-exploitation-plan-step-container [exploitationPlanStep]="exploitationPlanStep"
                                            [projectId]="projectId"
                                            [subproject]="subproject"></ipw-exploitation-plan-step-container>
    </div>
    <ipw-editable-textarea *ngIf="exploitationPlanStep"
                           [formConfig]="formConfig$"
                           [itemId]="exploitationPlanStep.id"
                           [editTitle]="'exploitation-plan.edit.btn.title' | translate"
                           [fieldTitle]="'exploitation-plan.description.title' | translate"
                           [content]="exploitationPlanStep.description"
                           (contentChange)="updateExploitationPlanStep($event)"></ipw-editable-textarea>
    </div>
  </ng-container>
</ipw-collapsable-panel>
