import { NgModule } from '@angular/core';
import { CommonModule } from '@angular/common';

import { EffectsModule } from '@ngrx/effects';
import { StoreConfig, StoreModule } from '@ngrx/store';

import { ExploitationPlanComponent } from './exploitation-plan.component';
import { ExploitationPlanService } from './core/exploitation-plan.service';
import { ExploitationPlanStateService } from './core/exploitation-plan-state.service';
import { ExploitationPlanEffects } from './core/exploitation-plan.effects';
import { storeModuleConfig } from '../app.reducer';
import { exploitationPlanReducer, ExploitationPlanState } from './core/exploitation-plan.reducer';
import { ExploitationPlanActions } from './core/exploitation-plan.actions';
import { SharedModule } from '../shared/shared.module';
import { ExploitationPlanStepComponent } from './steps/exploitation-plan-step.component';
import { ImpactPathwaySharedModule } from '../impact-pathway-board/shared/impact-pathway-shared.module';
import { ExploitationPlanDirective } from './core/exploitation-plan.directive';
import { ExploitationPlanStepContainerComponent } from './steps/container/exploitation-plan-step-container.component';
import { ExploitationPlanTaskComponent } from './steps/tasks/exploitation-plan-task.component';
import { ProjectItemService } from '../core/project/project-item.service';
import { DragDropModule } from '@angular/cdk/drag-drop';

const MODULES = [
  CommonModule,
  StoreModule.forFeature('exploitationPlan', exploitationPlanReducer, storeModuleConfig as StoreConfig<ExploitationPlanState, ExploitationPlanActions>),
  EffectsModule.forFeature([ExploitationPlanEffects]),
  SharedModule,
  ImpactPathwaySharedModule,
  DragDropModule
];

const COMPONENTS = [
  ExploitationPlanComponent,
  ExploitationPlanStepComponent,
  ExploitationPlanStepContainerComponent,
  ExploitationPlanTaskComponent
];
const PROVIDERS = [
  ExploitationPlanService,
  ExploitationPlanStateService,
  ProjectItemService
];

const ENTRY_COMPONENTS = [];

const DIRECTIVES = [
  ExploitationPlanDirective
];

@NgModule({
  imports: [
    ...MODULES
  ],
  declarations: [
    ...COMPONENTS,
    ...DIRECTIVES,
    ...ENTRY_COMPONENTS
  ],
  providers: [
    ...PROVIDERS
  ],
  exports: [
    ...COMPONENTS,
    ...DIRECTIVES
  ]
})
export class ExploitationPlanModule { }
