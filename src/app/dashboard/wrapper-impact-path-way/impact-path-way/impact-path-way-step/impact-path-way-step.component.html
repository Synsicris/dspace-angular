<div class="h-100 d-flex flex-column"
     [class.vertical-step]="isVertical"
     [class.drop-allowed]="(isDragging | async) && (isDropAllowed | async)"
     [class.drop-denied]="(isDragging | async) && !(isDropAllowed | async)">
  <div class="text-center text-truncate p-1 m-2 font-weight-bold">
    <span>{{data.type}}</span>
  </div>
  <div id="{{data.id}}"
       class="d-flex p-2 h-100"
       [class.flex-column]="isVertical"
       [ngClass]="{'flex-wrap task-list-horizontal':!isVertical}"
       cdkDropList
       cdkDropListOrientation="{{isVertical ? 'vertical' : 'horizontal'}}"
       [cdkDropListData]="data"
       [cdkDropListConnectedTo]="connectedToList"
       (cdkDropListEntered)="listEntered($event)"
       (cdkDropListExited)="listExited($event)"
       (cdkDropListDropped)="listDropped($event)">
    <ipw-impact-path-way-task *ngFor="let task of data.tasks" cdkDrag
                              class="mb-sm-1 mb-lg-4"
                              [ngClass]="{
                                'mb-5 mr-sm-1 mr-lg-4 task-horizontal':!isVertical
                              }"
                              [data]="task"
                              [cdkDragData]="task"
                              (cdkDragDropped)="drop($event)"
                              (cdkDragEntered)="dragEntered($event)"
                              (cdkDragExited)="dragExited($event)"
                              (selected)="onTaskSelected($event)">
      <div *cdkDragPlaceholder
           class="task-placeholder d-flex justify-content-center align-items-center"
           [ngClass]="{
                'mb-sm-1 mb-lg-4':isVertical,
                'mr-sm-1 mr-lg-4':!isVertical,
                'task-preview-allowed': (isDragging | async) && (isDropAllowed | async),
                'task-preview-denied': (isDragging | async) && !(isDropAllowed | async)
              }" >
        <i *ngIf="(isDragging | async) && (isDropAllowed | async)" class="fas fa-check fa-5x"></i>
        <i *ngIf="(isDragging | async) && !(isDropAllowed | async)" class="fas fa-exclamation fa-5x"></i>
      </div>
    </ipw-impact-path-way-task>
  </div>
  <div class="d-flex justify-content-end">
    <button class="btn btn-link pr-0" (click)="createTask(); $event.stopPropagation()"><i class="fas fa-plus-circle fa-2x"></i></button>
  </div>
</div>
